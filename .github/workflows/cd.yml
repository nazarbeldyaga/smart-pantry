name: CD Deploy

on:
  push:
    branches: ['main']

jobs:
  deploy:
    name: Deploy to Production
    runs-on: ubuntu-latest

    env:
      RENDER_DEPLOY_HOOK: ${{ secrets.RENDER_DEPLOY_HOOK }}
      VERCEL_DEPLOY_HOOK: ${{ secrets.VERCEL_DEPLOY_HOOK }}

    steps:
      - name: Trigger Render Deploy
        if: ${{ env.RENDER_DEPLOY_HOOK != '' }}
        run: curl -X POST "$RENDER_DEPLOY_HOOK"

      - name: Trigger Vercel Deploy
        if: ${{ env.VERCEL_DEPLOY_HOOK != '' }}
        run: curl -X POST "$VERCEL_DEPLOY_HOOK"
